/*
 * Copyright 2020 Zeppelin Bend Pty Ltd
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */

syntax = "proto3";
option java_multiple_files = true;
option java_package = "com.zepben.protobuf.cim.iec61970.base.wires";
package zepben.protobuf.cim.iec61970.base.wires;

import "google/protobuf/struct.proto";
import "zepben/protobuf/cim/iec61970/base/wires/RegulatingControl.proto";

/**
 * Describes behaviour specific to tap changers, e.g. how the voltage at the end of a line varies with the load level and compensation of the voltage drop by tap adjustment.
 */
message TapChangerControl {

    /**
     * The RegulatingControl fields for this TapChangerControl.
     */
    RegulatingControl rc = 1;

    /**
     * Maximum allowed regulated voltage on the PT secondary, regardless of line drop compensation. Sometimes referred to as first-house protection.
     */
    oneof limitVoltage {
      google.protobuf.NullValue limitVoltageNull = 2;
      int32 limitVoltageSet = 3;
    }

    /**
     * If true, then line drop compensation is to be applied.
     */
    oneof lineDropCompensation {
        google.protobuf.NullValue lineDropCompensationNull = 4;
        bool lineDropCompensationSet = 5;
    }

    /**
     * Line drop compensator resistance setting for normal (forward) power flow in Ohms.
     */
    oneof lineDropR {
      google.protobuf.NullValue lineDropRNull = 6;
      double lineDropRSet = 7;
    }

    /**
     * Line drop compensator reactance setting for normal (forward) power flow in Ohms.
     */
    oneof lineDropX {
      google.protobuf.NullValue lineDropXNull = 8;
      double lineDropXSet = 9;
    }

    /**
     * Line drop compensator resistance setting for reverse power flow in Ohms.
     */
    oneof reverseLineDropR {
      google.protobuf.NullValue reverseLineDropRNull = 10;
      double reverseLineDropRSet = 11;
    }

    /**
     * Line drop compensator reactance setting for reverse power flow in Ohms.
     */
    oneof reverseLineDropX {
      google.protobuf.NullValue reverseLineDropXNull = 12;
      double reverseLineDropXSet = 13;
    }

    /**
     * True implies this tap changer turns off/ignores reverse current flows for line drop compensation when
     * power flow is reversed and no reverse line drop is set.
     */
    oneof forwardLDCBlocking {
        google.protobuf.NullValue forwardLDCBlockingNull = 14;
        bool forwardLDCBlockingSet = 15;
    }

    /**
     * The time delay for the tap changer in seconds.
     */
    oneof timeDelay {
      google.protobuf.NullValue timeDelayNull = 16;
      double timeDelaySet = 17;
    }

    /**
     * True implies cogeneration mode is enabled and that the control will regulate to the new source bushing (downline bushing),
     * keeping locations downline from experiencing overvoltage situations.
     */
    oneof coGenerationEnabled {
        google.protobuf.NullValue coGenerationEnabledNull = 18;
        bool coGenerationEnabledSet = 19;
    }

}
