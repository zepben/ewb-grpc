/*
 * Copyright 2020 Zeppelin Bend Pty Ltd
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */

syntax = "proto3";
option java_multiple_files = true;
option java_package = "com.zepben.protobuf.cim.iec61970.base.wires";
package zepben.protobuf.cim.iec61970.base.wires;

import "zepben/protobuf/cim/iec61970/base/core/IdentifiedObject.proto";
import "google/protobuf/struct.proto";

/**
 * A conducting connection point of a power transformer. It corresponds to a physical transformer winding terminal.
 * In earlier CIM versions, the TransformerWinding class served a similar purpose, but this class is more flexible
 * because it associates to terminal but is not a specialization of ConductingEquipment.
 */
message TransformerEnd {

    /**
     * IdentifiedObject fields for this TransformerEnd.
     */
    core.IdentifiedObject io = 1;

    /**
     * The terminal of the transformer that this end is associated with
     */
    string terminalMRID = 2;

    /**
     * Base voltage of the transformer end.  This is essential for PU calculation.
     */
    string baseVoltageMRID = 3;

    /**
     * This TransformerEnds number.
     */
    oneof endNumber {
      google.protobuf.NullValue endNumberNull = 4;
      uint32 endNumberSet = 5;
    }

    /**
     * The tap changer associated with this PowerTransformerEnd
     */
    string ratioTapChangerMRID = 6;

    /**
     * (for Yn and Zn connections) True if the neutral is solidly grounded.
     */
    oneof grounded {
      google.protobuf.NullValue groundedNull = 7;
      bool groundedSet = 8;
    }

    /**
     * (for Yn and Zn connections) Resistance part of neutral impedance where 'grounded' is true.
     */
    oneof rGround {
      google.protobuf.NullValue rGroundNull = 9;
      double rGroundSet = 10;
    }

    /**
     * (for Yn and Zn connections) Reactive part of neutral impedance where 'grounded' is true.
     */
    oneof xGround {
      google.protobuf.NullValue xGroundNull = 11;
      double xGroundSet = 12;
    }

    /**
     * (accurate for 2- or 3-winding transformers only) Pi-model impedances of this transformer end.
     *  By convention, for a two winding transformer,
     * the full values of the transformer should be entered on the high voltage end (endNumber=1).
     */
    string starImpedanceMRID = 13;

}
