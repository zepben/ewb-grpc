/*
 * Copyright 2021 Zeppelin Bend Pty Ltd
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */

syntax = "proto3";
option java_multiple_files = true;
option java_package = "com.zepben.protobuf.cim.iec61968.assetinfo";
package zepben.protobuf.cim.iec61968.assetinfo;

import "zepben/protobuf/cim/iec61968/assets/AssetInfo.proto";
import "zepben/protobuf/cim/iec61970/base/wires/WindingConnection.proto";
import "google/protobuf/struct.proto";

/**
 * Transformer end data.
 */
message TransformerEndInfo {

  /**
   * AssetInfo fields for this TransformerEndInfo
   */
  assets.AssetInfo ai = 1;

  /**
   * Kind of connection.
   */
  iec61970.base.wires.WindingConnection connectionKind = 2;

  /**
   * Apparent power that the winding can carry under emergency conditions (also called long-term emergency power).
   */
  oneof emergencyS {
    google.protobuf.NullValue emergencySNull = 3;
    int32 emergencySSet = 4;
  }

  /**
   * Number for this transformer end, corresponding to the end's order in the PowerTransformer.vectorGroup attribute.
   * Highest voltage winding should be 1.
   */
  int32 endNumber = 5;

  /**
   * Basic insulation level voltage rating.
   */
  oneof insulationU {
    google.protobuf.NullValue insulationUNull = 6;
    int32 insulationUSet = 7;
  }

  /**
   * Winding phase angle where 360 degrees are represented with clock hours, so the valid values are {0, ..., 11}.
   * For example, to express the second winding in code 'Dyn11',
   * set attributes as follows: 'endNumber'=2, 'connectionKind' = Yn and 'phaseAngleClock' = 11.
   */
  oneof phaseAngleClock {
    google.protobuf.NullValue phaseAngleClockNull = 8;
    int32 phaseAngleClockSet = 9;
  }

  /**
   * DC resistance.
   */
  oneof r {
    google.protobuf.NullValue rNull = 10;
    double rSet = 11;
  }

  /**
   * Normal apparent power rating.
   */
  oneof ratedS {
    google.protobuf.NullValue ratedSNull = 12;
    int32 ratedSSet = 13;
  }

  /**
   * Rated voltage: phase-phase for three-phase windings, and either phase-phase
   * or phase-neutral for single-phase windings.
   */
  oneof ratedU {
    google.protobuf.NullValue ratedUNull = 14;
    int32 ratedUSet = 15;
  }

  /**
   * Apparent power that this winding can carry for a short period of time (in emergency).
   */
  oneof shortTermS {
    google.protobuf.NullValue shortTermSNull = 16;
    int32 shortTermSSet = 17;
  }

  /**
   * Transformer tank data that this end description is part of.
   */
  string transformerTankInfoMRID = 18;

  /**
   * Transformer star impedance calculated from this transformer end datasheet.
   */
  string transformerStarImpedanceMRID = 19;

  /**
   * All no-load test measurements in which this transformer end was energised.
   */
  string energisedEndNoLoadTestsMRID = 20;

  /**
   * All short-circuit test measurements in which this transformer end was short-circuited.
   */
  string energisedEndShortCircuitTestsMRID = 21;

  /**
   * All short-circuit test measurements in which this transformer end was energised.
   */
  string groundedEndShortCircuitTestsMRID = 22;

  /**
   * All open-circuit test measurements in which this transformer end was not excited.
   */
  string openEndOpenCircuitTestsMRID = 23;

  /**
   * All open-circuit test measurements in which this transformer end was excited.
   */
  string energisedEndOpenCircuitTestsMRID = 24;

}
