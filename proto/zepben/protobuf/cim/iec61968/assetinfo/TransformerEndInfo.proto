/*
 * Copyright 2021 Zeppelin Bend Pty Ltd
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */

syntax = "proto3";
option java_multiple_files = true;
option java_package = "com.zepben.protobuf.cim.iec61968.assetinfo";
package zepben.protobuf.cim.iec61968.assetinfo;

import "zepben/protobuf/cim/iec61968/assets/AssetInfo.proto";
import "zepben/protobuf/cim/iec61970/base/wires/WindingConnection.proto";
import "google/protobuf/struct.proto";

/**
 * Transformer end data.
 */
message TransformerEndInfo {

  /**
   * AssetInfo fields for this TransformerEndInfo
   */
  assets.AssetInfo ai = 1;

  /**
   * Kind of connection.
   */
  iec61970.base.wires.WindingConnection connectionKind = 2;

  /**
   * Apparent power that the winding can carry under emergency conditions (also called long-term emergency power).
   */
  oneof emergencyS {
    google.protobuf.NullValue emergencySNull = 3;
    int32 emergencySSet = 4;
  }

  /**
   * Number for this transformer end, corresponding to the end's order in the PowerTransformer.vectorGroup attribute.
   * Highest voltage winding should be 1.
   */
  oneof endNumber {
    google.protobuf.NullValue endNumberNull = 5;
    int32 endNumberSet = 6;
  }

  /**
   * Basic insulation level voltage rating.
   */
  oneof insulationU {
    google.protobuf.NullValue insulationUNull = 7;
    int32 insulationUSet = 8;
  }

  /**
   * Winding phase angle where 360 degrees are represented with clock hours, so the valid values are {0, ..., 11}.
   * For example, to express the second winding in code 'Dyn11',
   * set attributes as follows: 'endNumber'=2, 'connectionKind' = Yn and 'phaseAngleClock' = 11.
   */
  oneof phaseAngleClock {
    google.protobuf.NullValue phaseAngleClockNull = 9;
    int32 phaseAngleClockSet = 10;
  }

  /**
   * DC resistance.
   */
  oneof r {
    google.protobuf.NullValue rNull = 11;
    double rSet = 12;
  }

  /**
   * Normal apparent power rating.
   */
  oneof ratedS {
    google.protobuf.NullValue ratedSNull = 13;
    int32 ratedSSet = 14;
  }

  /**
   * Rated voltage: phase-phase for three-phase windings, and either phase-phase
   * or phase-neutral for single-phase windings.
   */
  oneof ratedU {
    google.protobuf.NullValue ratedUNull = 15;
    int32 ratedUSet = 16;
  }

  /**
   * Apparent power that this winding can carry for a short period of time (in emergency).
   */
  oneof shortTermS {
    google.protobuf.NullValue shortTermSNull = 17;
    int32 shortTermSSet = 18;
  }

  /**
   * Transformer tank data that this end description is part of.
   */
  oneof transformerTankInfoMRID {
    google.protobuf.NullValue transformerTankInfoMRIDNull = 19;
    string transformerTankInfoMRIDSet = 20;
  }

  /**
   * Transformer star impedance calculated from this transformer end datasheet.
   */
  oneof transformerStarImpedanceMRID {
    google.protobuf.NullValue transformerStarImpedanceMRIDNull = 21;
    string transformerStarImpedanceMRIDSet = 22;
  }

  /**
   * All no-load test measurements in which this transformer end was energised.
   */
  oneof energisedEndNoLoadTestsMRID {
    google.protobuf.NullValue energisedEndNoLoadTestsMRIDNull = 23;
    string energisedEndNoLoadTestsMRIDSet = 24;
  }

  /**
   * All short-circuit test measurements in which this transformer end was short-circuited.
   */
  oneof energisedEndShortCircuitTestsMRID {
    google.protobuf.NullValue energisedEndShortCircuitTestsMRIDNull = 25;
    string energisedEndShortCircuitTestsMRIDSet = 26;
  }

  /**
   * All short-circuit test measurements in which this transformer end was energised.
   */
  oneof groundedEndShortCircuitTestsMRID {
    google.protobuf.NullValue groundedEndShortCircuitTestsMRIDNull = 27;
    string groundedEndShortCircuitTestsMRIDSet = 28;
  }

  /**
   * All open-circuit test measurements in which this transformer end was not excited.
   */
  oneof openEndOpenCircuitTestsMRID {
    google.protobuf.NullValue openEndOpenCircuitTestsMRIDNull = 29;
    string openEndOpenCircuitTestsMRIDSet = 30;
  }

  /**
   * All open-circuit test measurements in which this transformer end was excited.
   */
  oneof energisedEndOpenCircuitTestsMRID {
    google.protobuf.NullValue energisedEndOpenCircuitTestsMRIDNull = 31;
    string energisedEndOpenCircuitTestsMRIDSet = 32;
  }

}
